# =============================================================================
# TRIAGE & ACUITY AGENT - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and configure for your environment

# -----------------------------------------------------------------------------
# SERVICE IDENTIFICATION
# -----------------------------------------------------------------------------
SERVICE_NAME=triage-acuity-agent
SERVICE_VERSION=1.0.0
ENVIRONMENT=development

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
# PostgreSQL connection for patient triage data
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/hospital_ai
DB_POOL_SIZE=5
DB_POOL_TIMEOUT=30

# -----------------------------------------------------------------------------
# FEDERATED LEARNING CONFIGURATION
# -----------------------------------------------------------------------------
# Flower FL server for collaborative triage model training
FL_SERVER_ADDRESS=fl-triage-server:8086
FL_ENABLED=true
FL_LOCAL_EPOCHS=3
FL_MIN_FIT_CLIENTS=2

# Hospital identifier for FL (unique per hospital in network)
HOSPITAL_ID=hospital_default

# -----------------------------------------------------------------------------
# MODEL CONFIGURATION
# -----------------------------------------------------------------------------
# XGBoost hyperparameters
XGBOOST_N_ESTIMATORS=100
XGBOOST_MAX_DEPTH=6
XGBOOST_LEARNING_RATE=0.1
XGBOOST_MIN_CHILD_WEIGHT=1

# Acuity thresholds (probability thresholds for each level)
# If probability of critical >= 0.3, escalate
ACUITY_CRITICAL_THRESHOLD=0.3
ACUITY_ESCALATION_ENABLED=true

# -----------------------------------------------------------------------------
# RED FLAG SAFETY CONFIGURATION
# -----------------------------------------------------------------------------
# Enable Red Flag keyword override (HIGHLY RECOMMENDED for safety)
RED_FLAG_OVERRIDE_ENABLED=true

# Override level when Red Flag detected (1=Critical, 2=Emergent)
RED_FLAG_DEFAULT_ACUITY=1

# Log all Red Flag detections for audit
RED_FLAG_AUDIT_LOGGING=true

# -----------------------------------------------------------------------------
# API CONFIGURATION
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8005
API_WORKERS=1
DEBUG=false

# -----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# MLFLOW CONFIGURATION
# -----------------------------------------------------------------------------
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_EXPERIMENT_NAME=triage_acuity
MLFLOW_MODEL_REGISTRY_NAME=triage-acuity-xgboost
